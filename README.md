# Digital-image-analysis

This python script contains functions for image analysis and transformation. The script uses openCV, matplotlib and numpy. OpenaCV is used for reading and writing images.

Functions

1) connvertToGrayScale accepts two arguments, image path and boolean value. If the boolean values is true then the image is shown and returned otherwise it's not shown.

2) createHistogram creates histogram that show the number of pixcels of certain value. This function accepts five arguments, image path, pic, cumulative, show_pic and show_hist. This function can accept path to an image or image that has previously imported, for this purpose arguments image path and pic are used. Argument cumulative is boolean values that determines will the histogram be cumulative or not. Boolean argument show_pic and show_hist determine wether to show image and histogram or not.

3) normalizeHistogram spreads image histogram over the whole range of values (0-255) which has the effect of adding contrast to the image. Noramlization is done by first finding ends of histogram and then the noramlized value of pixcel is calculated with formula new_pixcel = (pixcel-hist_begin) * (255/hist_end). This function has two arguments, image path and show_pic. Argument show_pic accepts the boolean value and determines wether or not the path image will be shown. Normalized histogram is always shown.

4) equalizedHistogram equalizes number of pixcels over the range of values which is achieved by manipulating cumulative histogram of an image to resemble a line that rises at the steady rate from 0 to 255. This frunction accepts image path. The new image is always shown.

5) gamaCorection enables us to change value of gama in the image. This is done by dividing value of pixcel with 255 then exponentiating that value with the value of gama that we provide, at the end the gotten value is multiplied with 255 so that the value of pixcel coresponds to the RGB format. This function accepts two arguments, image path and correction which represents the gama value. The new image is always shown.

6) amplitudeSegmetation creates black and white image depenting on the chosen border value. If pixcel has the value that is above the given border value than pixcel is colored white otherwhise it's colored black. Before giving the user a choice of the border value, the histogram of imported image is shown so that the border could be determined. This function accepts three arguments, image path, img and border. The function can accept path to an image or image that has been previously been imported. The border value has its defoult value set to 0. The new black and white image is always show and returned.

7) convolution does convolution of given image and inputed filter. Convolution is done by conv_cor function. This function can do median convolution. Convolution accepts three arguments, image path, median and karnel. Median is boolean value that determines wether the function will perform the median or ordinary convolution. Karnel is 2D array that in whitch the filter is stored. The filter is written row by row, where every member can be of type float except of the pivot element whitch is written as a string that ends with question mark. The pivot element marks the place where all the added values of singel convolution iteration are set into the new image with realtion to the karnel that is placed over the old image. Convoluted image is always shown and returned.

8) corelation 

Helper Functions

1) importPic function is helper function that accepts two arguments, image path and mode. Argument mode is int variable that determines wether the image is diretly read as gray scale image. Image will be read as gray scale image when mode = 0. If we want to read image in color the mode needs to be 1 (default value). When an image is read with mode 0 it is convertet into numpy 2D array where the color is expresed as a singel value, but when the image is read with mode 1 then the color represented as RGB value in form of array with length of 3.

2) conv_cor is helper function that performs convolution and corelation. This function accepts six arguments, image path, conv_cor, jezgra, median, edge and second. Conv_cor is boolean that determines wether to perform convolution or corelation. Jezgra can be used to pass karnel to the function or if ti has value None than conv_cor function lets the user input karnel directly. In either way, karnel must have the same number of rows and columns. Medina is boolean value that determines wether to perform median convolution or median corelation. Edge is a boolean values that determines wether edge detection is used. Second is boolean value that determines wether the negative values pixcels calculated in convolution or corelation should stay negative or turned to coresponding absolute values. After the function establishes the karnel, the distance between the pivot element of the karnel and the edges are calculated, using calcDistToEdge, and together they create pivot position named pos that is array. After the position is calculated final karnel is created with function kanelFinal that finds the pivot element of the karnel based on the pos array and transforms the pivot element from string to float creating karnel that is sutable for use in calculations. After the function establishes the karnel, it's rotated by 180Â° depending wether the convolution is beeing performed. For this use the function rotate180 is used. Next, blank image is created which is larger then the provided image by karnel length - 1 and filled with pixcels with value 0. Provided image is imprinted onto the larger blank image, using imprintMatrix, in a way that the original has the same distances from the edges of the blank image as the pivot element has in the karnel. If median is true then median matrix multiplication is performed otherwise ordinary matrix multiplication is done, these multiplications are done using matrixMultiMedian and matrixMulti functions. Multiplication functions return the new image. Becouse the new image is larger than the original image so it needs to be cut to the original dimensions. The amount that needs to be cut is determined from pos array. The image cutting is done by cutOriginalImage. The cut image is turned to numpy array and returned.

2.1) createKarnel is helper function that alowes the user to directly input the karenl. This doesnt accept any arguments. User inputs the karnel row by row and marks the pivot element with sufix ?. Becouse the karnel needs to be squer matrix and the function doesnt know the dimensions of the karnel, the first row of the karnel is used to determine the karnel dimensions. For inputting karnel rows createKarnelRow function is used. After the first row is entered the dimensions of karnel are known and the user is prompted to input the rest of the rows. After all the rows are filled they are added in a array createing 2D array that makes the karnel. Created karnel is then returned.

2.1.1) createKarnelRow is helper function that is used for creating karnel rows. this function accepts single argument, row that is a sting that represents a row of karnel. Every element of a row is separated with space and the pivot element of karnel is written with sufix ?. At the start, the function appends the space at the end of the string that represents the row. Next the karnel elements are converted from string to an array. This is done by turning the string to array of characters. Each element of karnel is extracted from the array of chars by grouping chars into string until we get to space character. Becouse of this way of separating karnel elements, at the beginig of the function we appended the space to the string. After we have gone through the char array the newly created array of karnel elements is returned.

2.1.1.1) appendSpace is helper function that appends space to the end of the string. This function accepts single argument, row which is a string. New string is returned after the space has been appended.

2.2) calcDistToEdge is helper function 
